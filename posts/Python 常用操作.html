<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Python 常用操作 | 東の小屋</title>
    <meta name="description" content="这是東的小站">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/blog/assets/style.BLPeULJo.css" as="style">
    <link rel="preload stylesheet" href="/blog/vp-icons.css" as="style">
    
    <script type="module" src="/blog/assets/app.DyVerevX.js"></script>
    <link rel="preload" href="/blog/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/blog/assets/chunks/theme.DqeAvIEM.js">
    <link rel="modulepreload" href="/blog/assets/chunks/framework.BCQIvfuA.js">
    <link rel="modulepreload" href="/blog/assets/posts_Python 常用操作.md.DrgMyZoO.lean.js">
    <script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;cab542667bf5448b9f1129a773c18ace&quot;}"></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><!--[--><div class="Layout" data-v-2fda86d3><!--[--><!--]--><!--[--><span tabindex="-1" data-v-ab03efea></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-ab03efea>Skip to content</a><!--]--><!----><header class="VPNav" data-v-2fda86d3 data-v-837f52e9><div class="VPNavBar" data-v-837f52e9 data-v-fd0b449f><div class="wrapper" data-v-fd0b449f><div class="container" data-v-fd0b449f><div class="title" data-v-fd0b449f><div class="VPNavBarTitle" data-v-fd0b449f data-v-1d2d5d11><a class="title" href="/blog/" data-v-1d2d5d11><!--[--><!--]--><!----><span data-v-1d2d5d11>東の小屋</span><!--[--><!--]--></a></div></div><div class="content" data-v-fd0b449f><div class="content-body" data-v-fd0b449f><!--[--><!--]--><div class="VPNavBarSearch search" data-v-fd0b449f><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-fd0b449f data-v-3235703c><span id="main-nav-aria-label" class="visually-hidden" data-v-3235703c> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/index" tabindex="0" data-v-3235703c data-v-56fa7338><!--[--><span data-v-56fa7338>🏡首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/posts/index" tabindex="0" data-v-3235703c data-v-56fa7338><!--[--><span data-v-56fa7338>🪶笔记</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/nav" tabindex="0" data-v-3235703c data-v-56fa7338><!--[--><span data-v-56fa7338>🚀导航</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/about" tabindex="0" data-v-3235703c data-v-56fa7338><!--[--><span data-v-56fa7338>💕关于</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-fd0b449f data-v-470b0219><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-470b0219 data-v-79b38a36 data-v-f09ab3f5><span class="check" data-v-f09ab3f5><span class="icon" data-v-f09ab3f5><!--[--><span class="vpi-sun sun" data-v-79b38a36></span><span class="vpi-moon moon" data-v-79b38a36></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-fd0b449f data-v-ff07d78d data-v-0bb1680c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/haodongcui" aria-label="github" target="_blank" rel="noopener" data-v-0bb1680c data-v-daed5044><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-fd0b449f data-v-2884c1ad data-v-d2209c05><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-d2209c05><span class="vpi-more-horizontal icon" data-v-d2209c05></span></button><div class="menu" data-v-d2209c05><div class="VPMenu" data-v-d2209c05 data-v-892ad764><!----><!--[--><!--[--><!----><div class="group" data-v-2884c1ad><div class="item appearance" data-v-2884c1ad><p class="label" data-v-2884c1ad>Appearance</p><div class="appearance-action" data-v-2884c1ad><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-2884c1ad data-v-79b38a36 data-v-f09ab3f5><span class="check" data-v-f09ab3f5><span class="icon" data-v-f09ab3f5><!--[--><span class="vpi-sun sun" data-v-79b38a36></span><span class="vpi-moon moon" data-v-79b38a36></span><!--]--></span></span></button></div></div></div><div class="group" data-v-2884c1ad><div class="item social-links" data-v-2884c1ad><div class="VPSocialLinks social-links-list" data-v-2884c1ad data-v-0bb1680c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/haodongcui" aria-label="github" target="_blank" rel="noopener" data-v-0bb1680c data-v-daed5044><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-fd0b449f data-v-6a6f6937><span class="container" data-v-6a6f6937><span class="top" data-v-6a6f6937></span><span class="middle" data-v-6a6f6937></span><span class="bottom" data-v-6a6f6937></span></span></button></div></div></div></div><div class="divider" data-v-fd0b449f><div class="divider-line" data-v-fd0b449f></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-2fda86d3 data-v-308846b3><div class="container" data-v-308846b3><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-308846b3 data-v-6f4efccf><button data-v-6f4efccf>返回顶部</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-2fda86d3 data-v-b0d15646><div class="VPDoc has-aside" data-v-b0d15646 data-v-9baa9171><!--[--><!--]--><div class="container" data-v-9baa9171><div class="aside" data-v-9baa9171><div class="aside-curtain" data-v-9baa9171></div><div class="aside-container" data-v-9baa9171><div class="aside-content" data-v-9baa9171><div class="VPDocAside" data-v-9baa9171 data-v-2e981934><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-2e981934 data-v-d7fd859d><div class="content" data-v-d7fd859d><div class="outline-marker" data-v-d7fd859d></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-d7fd859d>目录</div><ul class="VPDocOutlineItem root" data-v-d7fd859d data-v-fbf4eb0e><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-2e981934></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-9baa9171><div class="content-container" data-v-9baa9171><!--[--><!--[--><!--[--><!--[--><div class="doc-header-container" data-v-1ab26a90><h1 class="doc-header-title" data-v-1ab26a90>Python 常用操作</h1><div class="doc-header-info" data-v-1ab26a90><span class="doc-header-date" data-v-1ab26a90>🕐2024-08-30</span><span class="doc-header-categories" data-v-1ab26a90>🌱Python</span><!--[--><span class="doc-header-tags" data-v-1ab26a90>🏷Python</span><!--]--></div></div><!--]--><!--]--><!--]--><!--]--><main class="main" data-v-9baa9171><div style="position:relative;" class="vp-doc _blog_posts_Python%20%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C" data-v-9baa9171><div><h1 id="python-常用操作" tabindex="-1">Python 常用操作 <a class="header-anchor" href="#python-常用操作" aria-label="Permalink to &quot;Python 常用操作&quot;">​</a></h1><h2 id="matplotlib-中文和负号" tabindex="-1">matplotlib 中文和负号 <a class="header-anchor" href="#matplotlib-中文和负号" aria-label="Permalink to &quot;matplotlib 中文和负号&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> matplotlib.pyplot </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> plt</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">plt.rcParams[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;font.family&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;SimHei&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 中文</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">plt.rcParams[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;axes.unicode_minus&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 显示负号</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config InlineBackend.figure_format </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;retina&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # notebook画图更清晰，非notebook不需要</span></span></code></pre></div><h2 id="pandas-索引切片" tabindex="-1">pandas 索引切片 <a class="header-anchor" href="#pandas-索引切片" aria-label="Permalink to &quot;pandas 索引切片&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 基于标签索引</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df.loc[行索引, 列索引]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df.loc[行索引]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 基于整数索引</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df.iloc[行索引, 列索引] </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df.iloc[行索引]</span></span></code></pre></div><p>都适用于布尔数组</p><h2 id="pandas-dataframe-转-numpy-数组" tabindex="-1">pandas DataFrame 转 Numpy 数组 <a class="header-anchor" href="#pandas-dataframe-转-numpy-数组" aria-label="Permalink to &quot;pandas  DataFrame 转 Numpy 数组&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> df.values</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> np.numpy(df)</span></span></code></pre></div><h2 id="pandas-apply-自定义函数" tabindex="-1">pandas apply 自定义函数 <a class="header-anchor" href="#pandas-apply-自定义函数" aria-label="Permalink to &quot;pandas  apply 自定义函数&quot;">​</a></h2><p>参考链接：<a href="https://zhuanlan.zhihu.com/p/340770847" target="_blank" rel="noreferrer">Pandas数据处理(五) — apply() 方法介绍！ - 知乎 (zhihu.com)</a></p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df.apply(func, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">axis</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">raw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">result_type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kwds)</span></span></code></pre></div><ul><li><p>func 代表的是传入的函数或 lambda 表达式；</p></li><li><p>axis 参数可提供的有两个，该参数默认为 0/列</p><ul><li>0 或者 index ，表示函数处理的是每一列；</li><li>1 或 columns ，表示处理的是每一行;</li></ul></li><li><p>raw 是 bool 类型，默认为 False;</p><ul><li>False ，表示把每一行或列作为 Series 传入函数中；</li><li>True，表示接受的是 ndarray 数据类型；</li></ul></li></ul><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 构造df</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pd.DataFrame([[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">columns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;A&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;B&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;A&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 求行/列均值</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df.apply(np.mean, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">axis</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># axis=1表示对列操作</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df.apply(np.mean, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">axis</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># axis=1表示对行操作</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 对行/列开方</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df.apply(np.sqrt, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">axis</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># axis=1表示对列操作</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df.apply(np.sqrt, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">axis</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># axis=1表示对行操作</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 自定义函数（如：求每行的非零元素个数）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> count_nonzero</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(row):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> row:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;非零元素个数&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> df.apply(count_nonzero, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">axis</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="pandas-query-筛选函数" tabindex="-1">pandas query 筛选函数 <a class="header-anchor" href="#pandas-query-筛选函数" aria-label="Permalink to &quot;pandas  query 筛选函数&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 普通筛选</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df.query(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;country==&quot;china&quot;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 筛选df中country==china的行</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 变量筛选</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">country_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;china&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df.query(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;country==@country_name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用@</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df.query(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;country==&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">country_name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用f-string</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 判断条件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df.query(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;year&gt;2001&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="pandas-reset-index-重置索引" tabindex="-1">pandas reset_index 重置索引 <a class="header-anchor" href="#pandas-reset-index-重置索引" aria-label="Permalink to &quot;pandas  reset_index 重置索引&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">df.reset_index(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">inplace</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重置索引</span></span></code></pre></div><h2 id="plotly-导出图片陷入死循环" tabindex="-1">plotly 导出图片陷入死循环 <a class="header-anchor" href="#plotly-导出图片陷入死循环" aria-label="Permalink to &quot;plotly 导出图片陷入死循环&quot;">​</a></h2><p>不要安装最新版本的 kaleido，使用下面的语句安装 <code>0.1</code> 版本的 <code>kaleido</code></p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pip install </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">upgrade </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;kaleido==0.1.*&quot;</span></span></code></pre></div><h2 id="jupyter-导出为-markdown" tabindex="-1">jupyter 导出为 markdown <a class="header-anchor" href="#jupyter-导出为-markdown" aria-label="Permalink to &quot;jupyter 导出为 markdown&quot;">​</a></h2><p>安装 <code>nbconvert</code> 库及依赖 <code>pandoc</code>，使用如下命令</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pip install nbconvert</span></span>
<span class="line"><span>pip install pandoc</span></span></code></pre></div><p>在 <code>LearnPlotly.ipynb</code> 文件所在目录下，右键打开终端，输入如下转换命令</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jupyter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nbconvert</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> LearnPlotly.ipynb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> markdown</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-9baa9171 data-v-22aa9601><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--[--><div class="busuanzi"> 本站访客数 <span id="busuanzi_value_site_uv"></span> 人次 本站总访问量 <span id="busuanzi_value_site_pv"></span> 次 </div><div class="beian"><a href="https://beian.miit.gov.cn/" target="_blank">鲁ICP备2024115962号-3</a> <br></div><!--]--><!--]--></div><!--]--></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"about.md\":\"CaA_diJp\",\"blog-info_home111.md\":\"CBCCyNIC\",\"blog-info_home222.md\":\"Dc05OTwP\",\"blog-info_test-filename.md\":\"l_IA6d5N\",\"categories.md\":\"BuWUwzpO\",\"essays.md\":\"k3Bt8Qyo\",\"index.md\":\"D-LTEwJt\",\"nav.md\":\"YAvphTrH\",\"posts.md\":\"DdJx2vk8\",\"posts_adobeacrobat安装教程.md\":\"MJcrSrtN\",\"posts_clash verge 配置部分学术网站不走代理.md\":\"CSGfbb_f\",\"posts_conda 常用命令.md\":\"Cqs2FCcA\",\"posts_excel操作汇总.md\":\"D8jgHhl2\",\"posts_git 常用操作.md\":\"BtymQ89H\",\"posts_inkscape 操作汇总.md\":\"BVwaroBK\",\"posts_latex 常用操作.md\":\"CQYXt4nJ\",\"posts_latex 找出bib文件中重复条目.md\":\"wUca5eWt\",\"posts_math 裴礼文总结.md\":\"7El5TVDS\",\"posts_math 高等代数概览.md\":\"C3w1tqh5\",\"posts_nvm 安装与操作.md\":\"DuEO-eq8\",\"posts_python plotly库.md\":\"Rzi1JZwm\",\"posts_python 常用操作.md\":\"DrgMyZoO\",\"posts_tree 生成文件树.md\":\"Cyt8R6BP\",\"posts_ubuntu 操作记录.md\":\"O-lI1yA8\",\"posts_vitepress 文件路径重定向.md\":\"Cf0WIR-6\",\"posts_vitepress 视觉过渡组件.md\":\"j2VPqKbX\",\"posts_vitepress 设置文档来源为部分文件夹.md\":\"BaxTPms3\",\"posts_vmware 问题汇总.md\":\"D0epF9sp\",\"posts_vscode latex bibtex编译错误问题.md\":\"BFPC7V0e\",\"posts_vscode latex 配置.md\":\"B6SyuXP4\",\"posts_vscode markdown 导出pdf及样式设置.md\":\"oOUFJ0D5\",\"posts_vscode 回车键 换行键 卡顿.md\":\"D2etVt8_\",\"posts_windows 文件系统架构设计.md\":\"Br7J5bOd\",\"posts_winget 使用.md\":\"D7cKuxwu\",\"posts_wsl2 使用.md\":\"DNKtuRsP\",\"posts_《凡人修仙传》时间线梳理.md\":\"DygkYWIL\",\"posts_使用spacedesk与usb将平板作为电脑副屏.md\":\"SeqqUx57\",\"posts_如何推荐一本书 晨星ll.md\":\"BKKE0ZUA\",\"posts_数学建模学习笔记.md\":\"D6dypRcX\",\"posts_选课.md\":\"BhgRuopR\",\"posts_镜像列表.md\":\"Cq9Sra79\",\"posts_雅思分数对照表.md\":\"D31_wfP1\",\"tags.md\":\"D2j6hQKM\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"東の小屋\",\"description\":\"这是東的小站\",\"base\":\"/blog/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"🏡首页\",\"link\":\"/index.md\"},{\"text\":\"🪶笔记\",\"link\":\"/posts/index.md\"},{\"text\":\"🚀导航\",\"link\":\"/nav.md\"},{\"text\":\"💕关于\",\"link\":\"/about.md\"}],\"outline\":{\"level\":[1,3],\"label\":\"目录\"},\"returnToTopLabel\":\"返回顶部\",\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/haodongcui\"}],\"search\":{\"provider\":\"local\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>